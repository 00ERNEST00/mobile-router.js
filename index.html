<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>mobile-router.js by dolymood</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">mobile-router.js</h1>
      <h2 class="project-tagline">A lightweight single page bone for mobile web App.轻量级web端单页面骨架</h2>
      <a href="https://github.com/dolymood/mobile-router.js" class="btn">View on GitHub</a>
      <a href="https://github.com/dolymood/mobile-router.js/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/dolymood/mobile-router.js/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="mobile-routerjs--a-lightweight-single-page-bone-for-mobile-web-app" class="anchor" href="#mobile-routerjs--a-lightweight-single-page-bone-for-mobile-web-app" aria-hidden="true"><span class="octicon octicon-link"></span></a>mobile-router.js — A lightweight single page bone for mobile web App</h1>

<p><a href="https://npmjs.org/package/mobile-router.js"><img src="https://img.shields.io/npm/v/mobile-router.js.svg?style=flat" alt="NPM Version"></a>
<a href="https://npmjs.org/package/mobile-router.js"><img src="https://img.shields.io/npm/dm/mobile-router.js.svg?style=flat" alt="NPM Downloads"></a></p>

<p><a href="http://mrdocs.aijc.net/">Online docs</a></p>

<p><a href="http://demo.aijc.net/js/M/examples/">DEMO</a> - <a href="https://github.com/dolymood/mobile-router.js/blob/master/examples/index.html">source code</a></p>

<p><a href="http://demo.aijc.net/js/M/examples/requirejs/">require.js DEMO</a> - <a href="https://github.com/dolymood/mobile-router.js/blob/master/examples/requirejs/index.html">source code</a></p>

<p>The <a href="https://github.com/dolymood/mobile-router.js-demo">mobile-router.js-demo</a> is a simple mobile web app demo for <a href="https://github.com/dolymood/mobile-router.js">mobile-router.js</a>.</p>

<p><a href="https://github.com/dolymood/mobile-router.js/blob/master/README-zh_CN.md">中文 README</a></p>

<h2>
<a id="how-can-i-install-it" class="anchor" href="#how-can-i-install-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>How can i install it?</h2>

<p>Download a latest build from <a href="https://github.com/dolymood/mobile-router.js/releases">https://github.com/dolymood/mobile-router.js/releases</a> it contains development and minified production files in build/ folder.</p>

<p>or use npm</p>

<pre><code>npm install mobile-router.js
</code></pre>

<p>or use git clone</p>

<pre><code>git clone https://github.com/dolymood/mobile-router.js.git
</code></pre>

<h2>
<a id="how-can-i-use-it" class="anchor" href="#how-can-i-use-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>How can I use it?</h2>

<div class="highlight highlight-js"><pre>M.router.init([
    {
        path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>, <span class="pl-c">// route path</span>
        cacheTemplate<span class="pl-k">:</span> <span class="pl-c1">false</span>, <span class="pl-c">// cacheTemplate option for the current route</span>
        animation<span class="pl-k">:</span> <span class="pl-c1">true</span>, <span class="pl-c">// animation option for the current route</span>
        aniClass<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>slideup<span class="pl-pds">'</span></span>, <span class="pl-c">// switching effects option for the current route</span>
        <span class="pl-en">getTemplate</span>: <span class="pl-k">function</span>() { <span class="pl-c">// sync</span>
            <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>/index template content<span class="pl-pds">'</span></span>;
        },
        <span class="pl-en">callback</span>: <span class="pl-k">function</span>() {
            <span class="pl-k">if</span> (<span class="pl-v">this</span>.cached) <span class="pl-k">return</span>; <span class="pl-c">// the page was cached in document.</span>
            <span class="pl-c">// do something ...</span>
        },
        <span class="pl-en">onDestroy</span>: <span class="pl-k">function</span>() {
            <span class="pl-c">// destroy</span>
        }
    },
    {
        path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/c/:paramName<span class="pl-pds">'</span></span>,
        <span class="pl-en">getTemplate</span>: <span class="pl-k">function</span>(<span class="pl-smi">cb</span>) { <span class="pl-c">// async</span>
            <span class="pl-k">var</span> that <span class="pl-k">=</span> <span class="pl-v">this</span>;
            <span class="pl-c">// that.params - params info</span>
            <span class="pl-c">// that.query - query info</span>
            <span class="pl-c1">setTimeout</span>(<span class="pl-k">function</span>() {
                cb(<span class="pl-s"><span class="pl-pds">'</span>/c/<span class="pl-pds">'</span></span> <span class="pl-k">+</span> that.params.paramName <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span> template content<span class="pl-pds">'</span></span>);
            }, <span class="pl-c1">200</span>);
        },
        <span class="pl-en">callback</span>: <span class="pl-k">function</span>(<span class="pl-smi">paramName</span>) {
            <span class="pl-k">if</span> (<span class="pl-v">this</span>.cached) <span class="pl-k">return</span>;
            <span class="pl-c">// do something ...</span>
        },
        <span class="pl-en">onDestroy</span>: <span class="pl-k">function</span>() {
            <span class="pl-c">// destroy</span>
        }
    }
], {
    <span class="pl-c">/*cache tempaltes or not*/</span>
    cacheTemplate<span class="pl-k">:</span> <span class="pl-c1">true</span>,

    <span class="pl-c">/*views container's selector. Default document.body*/</span>
    viewsSelector<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>,

    <span class="pl-c">/*view class. Each page view will have a default class `page-view`, the `viewClass` option's value will be appended to the page view element's class */</span>
    viewClass<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>page-view<span class="pl-pds">'</span></span>,

    <span class="pl-c">/*use animation or not*/</span>
    animation<span class="pl-k">:</span> <span class="pl-c1">true</span>,
    <span class="pl-c">/*switching effects*/</span>
    aniClass<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>slide<span class="pl-pds">'</span></span>,

    <span class="pl-c">/*mask class for loading*/</span>
    maskClass<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>mask<span class="pl-pds">'</span></span>,
    <span class="pl-c">/*show loading or not*/</span>
    showLoading<span class="pl-k">:</span> <span class="pl-c1">true</span>,

    <span class="pl-c">/*cache views number. Default 3*/</span>
    cacheViewsNum<span class="pl-k">:</span> <span class="pl-c1">3</span>
});

<span class="pl-c">// Or like this</span>
M.router.get(<span class="pl-s"><span class="pl-pds">'</span>/ddd/{dddID:int}<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">dddID</span>) {
    <span class="pl-c">// callback</span>
}, { <span class="pl-c">// options</span>
    cacheTemplate<span class="pl-k">:</span> <span class="pl-c1">true</span>,
    <span class="pl-en">getTemplate</span>: <span class="pl-k">function</span>() {
        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>/ddd/<span class="pl-pds">'</span></span> <span class="pl-k">+</span> <span class="pl-v">this</span>.params.dddID;
    },
    <span class="pl-en">onDestroy</span>: <span class="pl-k">function</span>() {
        <span class="pl-c">// destroy</span>
    }
});

<span class="pl-c">/* global route change events */</span>
<span class="pl-c">/* `routeChangeStart` event, trigged before a route change. */</span>
M.router.on(<span class="pl-s"><span class="pl-pds">'</span>routeChangeStart<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">currentRouteState</span>) {

});
<span class="pl-c">/*`routeChangeEnd` event, trigged after a route changed and the page has been shown.*/</span>
M.router.on(<span class="pl-s"><span class="pl-pds">'</span>routeChangeEnd<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">currentRouteState</span>) {

});

<span class="pl-c">//  start history</span>
M.<span class="pl-c1">history</span>.<span class="pl-c1">start</span>({
    base<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>, <span class="pl-c">// base path of history. Default the url base in the head of your main html file (&lt;base href="/my-base"&gt;) or '/'</span>
    enablePushState<span class="pl-k">:</span> <span class="pl-c1">true</span> <span class="pl-c">// enable pushstate or not</span>
});
</pre></div>

<h2>
<a id="advantages" class="anchor" href="#advantages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Advantages?</h2>

<ul>
<li><p>Lightweight, Easy to use. Based on <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history">history</a>, <a href="https://developer.mozilla.org/en-US/docs/WindowEventHandlers.onpopstate">window.onpopstate</a>.</p></li>
<li><p>No Dependencies. You can use it with <code>jquery</code>, <code>zepto</code>, <code>iscroll</code> or others.</p></li>
<li><p>Cache templates automatically.</p></li>
<li><p>Good for <code>SEO</code>. You can render pages on server.</p></li>
<li><p>Cache pages automatically. Default cache pages number is <code>3</code>.</p></li>
<li><p>Switching pages use <code>CSS animation</code>.</p></li>
<li><p>Enable <code>pushstate</code> or not.</p></li>
</ul>

<h2>
<a id="about-seo" class="anchor" href="#about-seo" aria-hidden="true"><span class="octicon octicon-link"></span></a>About SEO</h2>

<p>The server can response HTML with cpmplete content</p>

<div class="highlight highlight-html"><pre>&lt;<span class="pl-ent">div</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>page-view<span class="pl-pds">"</span></span>&gt;&lt;<span class="pl-ent">h2</span>&gt;content rendered by the server&lt;/<span class="pl-ent">h2</span>&gt;&lt;/<span class="pl-ent">div</span>&gt;</pre></div>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>The <a href="https://github.com/dolymood/mobile-router.js/blob/master/LICENSE">MIT</a> License</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/dolymood/mobile-router.js">mobile-router.js</a> is maintained by <a href="https://github.com/dolymood">dolymood</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

