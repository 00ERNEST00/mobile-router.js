{"name":"mobile-router.js","tagline":"A lightweight single page bone for mobile web App.轻量级web端单页面骨架","body":"mobile-router.js — A lightweight single page bone for mobile web App\r\n=\r\n\r\n\r\n[![NPM Version][npm-image]][npm-url]\r\n[![NPM Downloads][downloads-image]][downloads-url]\r\n\r\n[Online docs](http://mrdocs.aijc.net/)\r\n\r\n[DEMO](http://demo.aijc.net/js/M/examples/) - [source code](https://github.com/dolymood/mobile-router.js/blob/master/examples/index.html)\r\n\r\n[require.js DEMO](http://demo.aijc.net/js/M/examples/requirejs/) - [source code](https://github.com/dolymood/mobile-router.js/blob/master/examples/requirejs/index.html)\r\n\r\nThe [mobile-router.js-demo](https://github.com/dolymood/mobile-router.js-demo) is a simple mobile web app demo for [mobile-router.js](https://github.com/dolymood/mobile-router.js).\r\n\r\n[mobile-router.js-sample](https://github.com/dolymood/mobile-router.js-sample) - A mobile-router.js demo like [ui-router sample](http://angular-ui.github.io/ui-router/sample/)\r\n\r\n[中文 README](https://github.com/dolymood/mobile-router.js/blob/master/README-zh_CN.md)\r\n\r\n## How can i install it?\r\n\r\nDownload a latest build from <https://github.com/dolymood/mobile-router.js/releases> it contains development and minified production files in build/ folder.\r\n\r\nor use npm\r\n\r\n\tnpm install mobile-router.js\r\n\r\nor use git clone\r\n\r\n\tgit clone https://github.com/dolymood/mobile-router.js.git\r\n\r\n## How can I use it?\r\n\r\n```js\r\nM.router.init([\r\n\t{\r\n\t\tpath: '/', // route path\r\n\t\tcacheTemplate: false, // cacheTemplate option for current route\r\n\t\tanimation: true, // animation option for current route\r\n\t\taniClass: 'slideup', // switching effects option for current route\r\n\t\tgetTemplate: function() { // sync\r\n\t\t\treturn '/index template content';\r\n\t\t},\r\n\t\tonActive: function() { // 1.5.5+ // called when the route is actived, even before create `page-view` element\r\n\r\n\t\t},\r\n\t\tcallback: function() { // called after the page has been shown\r\n\t\t\tif (this.cached) return; // the page was cached in document.\r\n\t\t\t// do something ...\r\n\t\t},\r\n\t\tonDestroy: function() {\r\n\t\t\t// destroy\r\n\t\t},\r\n\t\tonEnter: function(paramName) { // 1.5.3+ // called when the page will show\r\n\r\n\t\t},\r\n\t\tonLeave: function() { // 1.5.3+ // called when the page will hide\r\n\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tpath: '/m/:paramName',\r\n\t\tgetTemplate: function(cb) { // async\r\n\t\t\tvar that = this;\r\n\t\t\t// that.params - params info\r\n\t\t\t// that.query - query info\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tcb('/m/' + that.params.paramName + ' template content');\r\n\t\t\t}, 200);\r\n\t\t},\r\n\t\tcallback: function(paramName) {\r\n\t\t\tif (this.cached) return;\r\n\t\t\t// do something ...\r\n\t\t},\r\n\t\tonDestroy: function() {\r\n\t\t\t// destroy\r\n\t\t}\r\n\t},\r\n\t{ // support redirectTo , string url or function (1.5.5+)\r\n\t\tpath: '/redirectTo/:rtPath',\r\n\t\tredirectPushState: false, // default true, enable `pushState` when redirectTo is actived\r\n\t\tredirectTo: function(rtPath) {\r\n\t\t\tconsole.log('redirectTo', arguments, this);\r\n\t\t\treturn '/' + rtPath;\r\n\t\t}\r\n\t},\r\n\t{ // support redirectTo , string url or function (1.5.5+)\r\n\t\t// if redirectTo route have getTemplate then the `page-view` will\r\n\t\t// be created, looks like a normal route. The redirectTo will be actived\r\n\t\t// after the route's callback is called\r\n\t\tpath: '/contacts',\r\n\t\tgetTemplate: contacts.getTemplate,\r\n\t\tonEnter: contacts.onEnter,\r\n\t\tonLeave: contacts.onLeave,\r\n\t\tcallback: contacts.controller,\r\n\t\tonDestroy: contacts.onDestroy,\r\n\r\n\t\tredirectTo: '/contacts/list',\r\n\t\tredirectPushState: false,\r\n\r\n\t\tchildren: { // Nested routes & views! (1.5.0+)\r\n\t\t\tviewsSelector: '.content',\r\n\t\t\tcacheViewsNum: 1,\r\n\t\t\troutes: [\r\n\t\t\t\t{\r\n\t\t\t\t\t// all contacts\r\n\t\t\t\t\tpath: '/list',\r\n\t\t\t\t\tgetTemplate: list.getTemplate,\r\n\t\t\t\t\tonEnter: list.onEnter,\r\n\t\t\t\t\tonLeave: list.onLeave,\r\n\t\t\t\t\tcallback: list.controller,\r\n\t\t\t\t\tonDestroy: list.onDestroy\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\t{ // Nested routes & views! (1.5.0+)\r\n\t\tpath: '/b/:bid',\r\n\t\tgetTemplate: function(cb) {\r\n\t\t\tvar path = this.path.substr(1);\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tvar lis = '';\r\n\t\t\t\tvar t;\r\n\t\t\t\t// build sub view link\r\n\t\t\t\tfor (var i = 1; i <= 4; i++) {\r\n\t\t\t\t\tt = path + '/s' + i;\r\n\t\t\t\t\tlis += '<li><a href=\"' + t + '\">/' + t + '</a></li>';\r\n\t\t\t\t\t// or: (looks like set `enablePushState:false`, do not change `location`)\r\n\t\t\t\t\t// lis += '<li><a href=\"#\" data-href=\"' + t + '\">/' + t + '</a></li>';\r\n\t\t\t\t}\r\n\t\t\t\tcb(\r\n\t\t\t\t\t'<ul class=\"nav\">' + lis + '</ul>'\r\n\t\t\t\t);\r\n\t\t\t}, 200);\r\n\t\t},\r\n\t\tcallback: function() {\r\n\t\t\tconsole.log('callback:/b', this, arguments);\r\n\t\t},\r\n\t\tonDestroy: function() {\r\n\t\t\tconsole.log('destroy:/b', this, arguments);\r\n\t\t},\r\n\r\n\t\tchildren: { // config for nested routes & views! (1.5.0+)\r\n\t\t\t/* these configs, default inherit form parent config */\r\n\t\t\tviewsSelector: '',\r\n\t\t\tviewClass: 'sub-view-b',\r\n\t\t\tmaskClass: 'mask',\r\n\t\t\tshowLoading: true,\r\n\t\t\tcacheViewsNum: 3,\r\n\t\t\tcacheTemplate: true,\r\n\t\t\tanimation: true,\r\n\t\t\taniClass: 'slide',\r\n\r\n\t\t\troutes: [\r\n\t\t\t\t{\r\n\t\t\t\t\tpath: '/:subB', // '/b/:bid/:subB'\r\n\t\t\t\t\t/* config for current sub route */\r\n\t\t\t\t\tcacheTemplate: false,\r\n\t\t\t\t\tanimation: true,\r\n\t\t\t\t\taniClass: 'slideup',\r\n\t\t\t\t\tgetTemplate: function(cb) {\r\n\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tcb('<div>' + that.path + '<p>sub content</p></div>');\r\n\t\t\t\t\t\t}, 200);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcallback: function() {\r\n\t\t\t\t\t\tconsole.log('sub callback b', this, arguments);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonDestroy: function() {\r\n\t\t\t\t\t\tconsole.log('sub destroy b', this, arguments);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n], {\r\n\t/*cache tempaltes or not*/\r\n\tcacheTemplate: true,\r\n\r\n\t/*views container's selector. Default document.body*/\r\n\tviewsSelector: '',\r\n\r\n\t/*view class. Each page view will have a default class `page-view`, the `viewClass` option's value will be appended to the page view element's class */\r\n\tviewClass: 'page-view',\r\n\r\n\t/*use animation or not*/\r\n\tanimation: true,\r\n\t/*switching effects*/\r\n\taniClass: 'slide',\r\n\r\n\t/*mask class for loading*/\r\n\tmaskClass: 'mask',\r\n\t/*show loading or not*/\r\n\tshowLoading: true,\r\n\r\n\t/*cache views number. Default 3*/\r\n\tcacheViewsNum: 3\r\n});\r\n\r\n// Or like this\r\nM.router.add('/ddd/{dddID:int}', function(dddID) {\r\n\t// callback\r\n}, { // options\r\n\tcacheTemplate: true,\r\n\tgetTemplate: function() {\r\n\t\treturn '/ddd/' + this.params.dddID;\r\n\t},\r\n\tonDestroy: function() {\r\n\t\t// destroy\r\n\t}\r\n});\r\n\r\n/* global route change events */\r\n/* `routeChangeStart` event, trigged before a route change. */\r\nM.router.on('routeChangeStart', function(currentRouteState) {\r\n\t\r\n});\r\n/*`routeChangeEnd` event, trigged after a route changed and the page has been shown.*/\r\nM.router.on('routeChangeEnd', function(currentRouteState) {\r\n\t\r\n});\r\n\r\n//  start history\r\nM.history.start({\r\n\tbase: '/', // base path of history. Default the url base in the head of your main html file (<base href=\"/my-base\">) or '/'\r\n\tenablePushState: true // enable pushstate or not\r\n});\r\n\r\n```\r\n\r\n## Advantages?\r\n\r\n* Lightweight, Easy. Based on [history](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history), [window.onpopstate](https://developer.mozilla.org/en-US/docs/WindowEventHandlers.onpopstate).\r\n\r\n* Nested routes & views (1.5.0+).\r\n\r\n* No Dependencies. You can use it with `jquery`, `zepto`, `iscroll` or others.\r\n\r\n* Cache templates automatically.\r\n\r\n* Good for `SEO`. You can render pages on server.\r\n\r\n* Cache pages automatically. Default cache pages number is `3`.\r\n\r\n* Switching pages use `CSS animation`.\r\n\r\n* Enable `pushstate` or not.\r\n\r\n## About examples/\r\n\r\n* `index.html`: basic usage, `getTemplate` config, and `data-rel=back` attribute config on link element for reverse animation direction.\r\n\r\n* `index1.html`: `data-href` attribute config on link for disable `pushState`, and disable `animation` of one route.\r\n \r\n* `index2.html`: disable `animation`.\r\n\r\n* `index3.html`: disable `cacheTemplate`.\r\n\r\n* `index4.html`: set global `aniClass`.\r\n\r\n* `index5.html`: set `aniClass` in two ways.\r\n\r\n* `index6.html`: set `cacheTemplate` of one route.\r\n\r\n* `index7.html`: set `M.history` config `enablePushState=false` for disable `pushState`.\r\n\r\n* `index8.html`: nested routes and views.\r\n\r\n* `requirejs/`: use [require.js](http://requirejs.org/)\r\n\r\n## About SEO\r\n\r\nThe server can response HTML with cpmplete content\r\n\r\n```html\r\n<div class=\"page-view\"><h2>content rendered by the server</h2></div>\r\n```\r\n\r\n## License\r\n\r\nThe [MIT](https://github.com/dolymood/mobile-router.js/blob/master/LICENSE) License\r\n\r\n[npm-image]: https://img.shields.io/npm/v/mobile-router.js.svg?style=flat\r\n[npm-url]: https://npmjs.org/package/mobile-router.js\r\n[downloads-image]: https://img.shields.io/npm/dm/mobile-router.js.svg?style=flat\r\n[downloads-url]: https://npmjs.org/package/mobile-router.js\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}